<!doctype html>
<html lang="jp"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Spring - OrangeNoteBlog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="OrangeNoteBlog"><meta name="msapplication-TileImage" content="/img/orange-facicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="OrangeNoteBlog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="この記事は..."><meta property="og:type" content="blog"><meta property="og:title" content="Spring"><meta property="og:url" content="https://ooblivion.github.io/Spring/"><meta property="og:site_name" content="OrangeNoteBlog"><meta property="og:description" content="この記事は..."><meta property="og:locale" content="jp"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225032262-554893553.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/a-jingchao/picture-bed/BlogImages/202209231052339.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225029294-308097912.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225023958-1337101230.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225022730-295467488.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225021003-390955477.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225020100-595283727.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225019042-256308566.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017810-913255998.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017292-839245531.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016901-616638652.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016376-1096343425.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225015351-1328960522.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225013207-117652476.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010448-1097867633.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009968-245466580.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009415-1211147445.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009024-1668862787.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225008190-562720078.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225006656-181017548.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225004925-138125066.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225000202-944398982.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224959586-1938022105.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958862-718896188.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958050-1510114155.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224956317-301982826.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955711-1709432265.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955110-1131072967.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224953279-1227107174.png"><meta property="og:image" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224949557-861548059.png"><meta property="article:published_time" content="2022-04-18T10:42:50.000Z"><meta property="article:modified_time" content="2024-04-18T10:45:15.071Z"><meta property="article:author" content="orange"><meta property="article:tag" content="Spring"><meta property="article:tag" content="Java"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225032262-554893553.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ooblivion.github.io/Spring/"},"headline":"Spring","image":["https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225032262-554893553.png","https://cdn.jsdelivr.net/gh/a-jingchao/picture-bed/BlogImages/202209231052339.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225029294-308097912.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225023958-1337101230.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225022730-295467488.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225021003-390955477.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225020100-595283727.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225019042-256308566.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017810-913255998.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017292-839245531.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016901-616638652.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016376-1096343425.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225015351-1328960522.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225013207-117652476.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010448-1097867633.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009968-245466580.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009415-1211147445.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009024-1668862787.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225008190-562720078.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225006656-181017548.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225004925-138125066.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225000202-944398982.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224959586-1938022105.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958862-718896188.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958050-1510114155.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224956317-301982826.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955711-1709432265.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955110-1131072967.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224953279-1227107174.png","https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224949557-861548059.png"],"datePublished":"2022-04-18T10:42:50.000Z","dateModified":"2024-04-18T10:45:15.071Z","author":{"@type":"Person","name":"orange"},"publisher":{"@type":"Organization","name":"OrangeNoteBlog","logo":{"@type":"ImageObject","url":"https://ooblivion.github.io/img/orange.png"}},"description":"この記事は..."}</script><link rel="canonical" href="https://ooblivion.github.io/Spring/"><link rel="icon" href="/img/orange-facicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?G-TQZ0DMPY0S";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="OrangeNoteBlog" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/orange.png" alt="OrangeNoteBlog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-lightbulb" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ooblivion"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目次" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="検索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-18T10:42:50.000Z" title="2022/4/18 19:42:50">2022-04-18</time>に投稿</span><span class="level-item"><time dateTime="2024-04-18T10:45:15.071Z" title="2024/4/18 19:45:15">2024-04-18</time>に更新</span><span class="level-item">an hourで読む (約9785語)</span></div></div><h1 class="title is-3 is-size-4-mobile">Spring</h1><div class="content"><!-- more -->
<blockquote>
<ul class="lvl-1">
<li class="lvl-2"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Vf4y127N5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f38047c43021f07cf7a4e84b564bde02%28%29">【尚硅谷】Spring框架视频教程（spring超详细源码级讲解）</a>
<ul class="lvl-3">
<li class="lvl-5">Spring框架可以单独构建应用程序，也可以和其他框架组合使用。Spring框架凭借其强大的功能以及优良的性能，在企业开发中被广泛应用。 本套教程从Spring框架最基础的部分讲起，内容由浅入深，适合有一定Java开发基础的相关人员，也适合具备一定软件开发能力的人员。</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="1-Spring框架概述">1. Spring框架概述</h2>
<ol>
<li class="lvl-3">
<p>Spring 是轻量级的开源的JavaEE框架</p>
</li>
<li class="lvl-3">
<p>Spring 可以解决企业应用开发的复杂性</p>
</li>
<li class="lvl-3">
<p>Spring 有两个核心部分:IOC和Aop</p>
<ol>
<li class="lvl-6">IOC:控制反转,把创建对象过程交给 Spring 进行管理</li>
<li class="lvl-6">Aop:面向切面,不修改源代码进行功能增强</li>
</ol>
</li>
<li class="lvl-3">
<p>Spring 特点</p>
<ol>
<li class="lvl-6">方便解耦,简化开发</li>
<li class="lvl-6">Aop编程支持</li>
<li class="lvl-6">方便程序测试</li>
<li class="lvl-6">方便和其他框架进行整合</li>
<li class="lvl-6">方便进行事务操作</li>
<li class="lvl-6">降低 API 开发难度</li>
</ol>
</li>
</ol>
<h2 id="2-入门案例">2. 入门案例</h2>
<h3 id="2-1-创建普通类-创建方法">2.1 创建普通类,创建方法</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-创建Spring配置-在配置文件中创建对象">2.2 创建Spring配置,在配置文件中创建对象</h3>
<p>bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置User对象创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-进行测试代码编写">2.3 进行测试代码编写</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.wmr.spring5.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSpring5</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//加载spring的配置文件</span></span><br><span class="line">        <span class="comment">//在src项目下使用ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//获取配置创建的对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        user.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-IOC">3. IOC</h2>
<h3 id="3-1-什么是IOC">3.1 什么是IOC</h3>
<ol>
<li class="lvl-3">
<p>控制反转,把对象创建和对象之间的调用过程交给 Spring 进行管理</p>
</li>
<li class="lvl-3">
<p>使用 IOC 目的:为了耦合度降低</p>
</li>
<li class="lvl-3">
<p>做入门案例就是 IOC 实现</p>
</li>
</ol>
<p>IOC是一种思想，DI是该思想的一种实现</p>
<h3 id="3-2-IOC底层原理">3.2 IOC底层原理</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>xml 解析、工厂模式、反射</p>
</li>
</ul>
<h3 id="3-3-画图讲解IOC底层原理">3.3 画图讲解IOC底层原理</h3>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225032262-554893553.png" alt="image-20230404170847224"></p>
<h3 id="3-4-IOC-BeanFactory接口">3.4 IOC(BeanFactory接口)</h3>
<p>BeanFactory是Spring自己用的，我们开发者用ApplicationContext（继承BeanFactory而来）</p>
<h4 id="3-4-1-IOC底层">3.4.1 IOC底层</h4>
<p>IOC 思想基于 IOC 容器完成,IOC 容器底层就是对象工厂</p>
<h4 id="3-4-2-Spring提供IOC容器实现的两种方式-两个接口">3.4.2 Spring提供IOC容器实现的两种方式:(两个接口)</h4>
<ol>
<li class="lvl-3">
<p>BeanFactory:IOC容器基本实现,是Spring内部的使用接口,不提供开发人员进行使用</p>
<ol>
<li class="lvl-6">加载配置文件时候不会创建对象,在获取对象(使用)才去创建对象（懒汉式？）</li>
</ol>
</li>
<li class="lvl-3">
<p>ApplicationContext:BeanFactory接口的子接口,提供更多更强大的功能,一般由开发人员进行使用</p>
<ol>
<li class="lvl-6">加载配置文件时候就会把在配置文件对象进行创建</li>
</ol>
</li>
</ol>
<h4 id="3-4-3-ApplicationContext接口有实现类">3.4.3 ApplicationContext接口有实现类</h4>
<p><img src="https://cdn.jsdelivr.net/gh/a-jingchao/picture-bed/BlogImages/202209231052339.png" alt="image-20220904165715743"></p>
<h3 id="3-5-IOC操作Bean管理-概念">3.5 IOC操作Bean管理(概念)</h3>
<h4 id="3-5-1-什么是Bean管理">3.5.1 什么是Bean管理</h4>
<ol>
<li class="lvl-3">
<p>Bean 管理指的是两个操作</p>
</li>
<li class="lvl-3">
<p>Spring 创建对象</p>
</li>
<li class="lvl-3">
<p>Spirng 注入属性</p>
</li>
</ol>
<h4 id="3-5-2-Bean管理操作有两种方式">3.5.2 Bean管理操作有两种方式</h4>
<ol>
<li class="lvl-3">
<p>基于xml配置文件方式实现</p>
</li>
<li class="lvl-3">
<p>基于注解方式实现</p>
</li>
</ol>
<p>我感觉注解就是抽象简化版的xml配置</p>
<h3 id="3-6-IOC操作Bean管理-基于XML方式">3.6 IOC操作Bean管理(基于XML方式)</h3>
<h4 id="3-6-1-基于xml方式创建对象">3.6.1 基于xml方式创建对象</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置User对象创建--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li class="lvl-3">
<p>在 spring 配置文件中,使用 bean 标签,标签里面添加对应属性,就可以实现对象创建</p>
</li>
<li class="lvl-3">
<p>在 bean 标签有很多属性,介绍常用的属性</p>
<ol>
<li class="lvl-6">id 属性:唯一标识</li>
<li class="lvl-6">class 属性:类全路径（包类路径）</li>
</ol>
</li>
<li class="lvl-3">
<p>创建对象时候,默认也是执行<font color='red'>无参数构造方法</font>完成对象创建</p>
</li>
</ol>
<h4 id="3-6-2-基于xml方式注入属性">3.6.2 基于xml方式注入属性</h4>
<ol>
<li class="lvl-3">
<p>DI:依赖注入,就是注入属性</p>
</li>
<li class="lvl-3">
<p>普通的注入属性有两种方法</p>
<ol>
<li class="lvl-6">set方法注入</li>
<li class="lvl-6">有参构造器注入</li>
</ol>
</li>
</ol>
<h4 id="3-6-3-在spring中-第一种注入方式-使用set方法进行注入">3.6.3 在spring中:第一种注入方式,使用set方法进行注入</h4>
<h5 id="3-6-3-1-创建类-定义属性和对应set方法">3.6.3.1 创建类,定义属性和对应set方法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="comment">//创建属性</span></span><br><span class="line">    <span class="keyword">private</span> String bname;</span><br><span class="line">    <span class="keyword">private</span> String bauthor;</span><br><span class="line">    <span class="comment">//创建属性对应的set方法注入</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBname</span><span class="params">(String bname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bname = bname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBauthor</span><span class="params">(String bauthor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bauthor = bauthor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-6-3-2-在spring配置文件中对象创建-配置注入">3.6.3.2 在spring配置文件中对象创建,配置注入</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.配置Book对象创建--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.set方法注入属性--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用property完成属性注入</span></span><br><span class="line"><span class="comment">            name:类里面属性名称</span></span><br><span class="line"><span class="comment">            value:向属性注入的值</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;红楼梦&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;曹雪芹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-6-3-3-测试类">3.6.3.3 测试类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBook1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;book&quot;</span>, Book.class);</span><br><span class="line">    System.out.println(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-4-在spring中-第二种注入方式-使用有参构造器进行注入">3.6.4 在spring中:第二种注入方式,使用有参构造器进行注入</h4>
<h5 id="3-6-4-1-创建类-定义属性-创建属性对应有参数构造方法">3.6.4.1 创建类,定义属性,创建属性对应有参数构造方法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String oname, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oname = oname;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-6-4-2-在spring配置文件中进行配置">3.6.4.2 在spring配置文件中进行配置</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.配置Orders对象创建--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.有参构造器注入--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用constructor-arg完成属性的注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;电视机&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;China&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-6-4-3-测试类">3.6.4.3 测试类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrders</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line">    System.out.println(orders);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-5-p名称空间注入">3.6.5 p名称空间注入</h4>
<p>使用p名称空间注入,可以简化基于xml配置方式</p>
<p>这个有点没太看懂啊，问一下我大爹ChatGPT</p>
<blockquote>
<p>在Spring框架中，<code>p</code> 命名空间是一种用于进行属性注入的简便方式，它允许你在XML配置文件中直接为bean的属性赋值，而不需要显式使用<code>&lt;property&gt;</code> 元素。下面是如何使用 <code>p</code> 命名空间的详细说明：</p>
<p><strong>1. 添加 <code>p</code> 命名空间声明：</strong> 在你的Spring配置文件中，首先需要在 <code>&lt;beans&gt;</code> 标签中添加 <code>p</code> 命名空间的声明。这告诉Spring框架你要使用 <code>p</code> 命名空间进行属性注入。你已经在配置文件中添加了 <code>xmlns:p</code>，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这一行声明了 <code>p</code> 命名空间，使其可用于属性注入。</p>
<p><strong>2. 使用 <code>p</code> 命名空间进行属性注入：</strong> 在你的 <code>&lt;bean&gt;</code> 元素中，你可以使用 <code>p:</code> 命名空间来指定要注入的属性及其值。例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span> <span class="attr">p:bname</span>=<span class="string">&quot;水浒传&quot;</span> <span class="attr">p:bauthor</span>=<span class="string">&quot;张三丰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!-- 上面这个是下面这个省略的写法 1.配置Book对象创建--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--2.set方法注入属性--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--使用property完成属性注入</span></span><br><span class="line"><span class="comment">               name:类里面属性名称</span></span><br><span class="line"><span class="comment">               value:向属性注入的值</span></span><br><span class="line"><span class="comment">           --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;红楼梦&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;曹雪芹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们创建了一个名为 <code>book</code> 的bean，它的类是 <code>com.wmr.spring5.Book</code>。使用 <code>p:</code> 命名空间，我们直接为 <code>bname</code> 和 <code>bauthor</code> 属性指定了值，分别是 “水浒传” 和 “张三丰”。这就是 <code>p</code> 命名空间的作用，使属性注入更加简洁和可读。</p>
<p>注意，使用 <code>p</code> 命名空间只适用于直接注入属性值。如果需要更复杂的依赖注入或引用其他bean，你可能仍然需要使用 <code>&lt;property&gt;</code> 元素或其他方式来配置bean之间的关系。</p>
</blockquote>
<h5 id="3-6-5-1-添加p名称空间在配置文件中">3.6.5.1 添加p名称空间在配置文件中</h5>
<p>前面这部分是xml的 namespace 命名空间</p>
<p><code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-6-5-2-进行属性注入-在bean标签里面进行操作">3.6.5.2 进行属性注入,在bean标签里面进行操作</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用p空间属性注入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span> <span class="attr">p:bname</span>=<span class="string">&quot;水浒传&quot;</span> <span class="attr">p:bauthor</span>=<span class="string">&quot;张三丰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-7-IOC操作Bean管理-xml注入其他类型属性">3.7 IOC操作Bean管理(xml注入其他类型属性)</h3>
<h4 id="3-7-1-字面量">3.7.1 字面量</h4>
<h5 id="3-7-1-1-null值">3.7.1.1 null值</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;红楼梦&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;曹雪芹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">null</span>&gt;</span><span class="tag">&lt;/<span class="name">null</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-7-1-2-属性包含特殊符号">3.7.1.2 属性包含特殊符号</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;红楼梦&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;曹雪芹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--属性值中包含特殊符号</span></span><br><span class="line"><span class="comment">            第一种: 把&lt;&gt;进行转义 &amp;lt; &amp;gt;</span></span><br><span class="line"><span class="comment">            第二种: 把带特殊符号内容写到 CDATA</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-7-2-注入属性-外部bean">3.7.2 注入属性-外部bean</h4>
<ol>
<li class="lvl-3">
<p>创建两个类 service 类和 dao 类</p>
</li>
<li class="lvl-3">
<p>在 service 调用 dao 里面的方法</p>
</li>
<li class="lvl-3">
<p>在 spring 配置文件中进行配置</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//创建 UserDao 类型属性,生成 set 方法</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Service add......&quot;</span>);</span><br><span class="line">        userDao.update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建service和对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.set方法注入属性--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入 userDao 对象</span></span><br><span class="line"><span class="comment">             name属性:类里面属性名称</span></span><br><span class="line"><span class="comment">             ref属性:创建 userDao 对象 bean 标签 id 值</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.dao.Impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-7-3-注入属性-内部bean">3.7.3 注入属性-内部bean</h4>
<ol>
<li class="lvl-3">
<p>一对多关系:部门和员工 一个部门有多个员工,一个员工属于一个部门 部门是一,员工是多</p>
</li>
<li class="lvl-3">
<p>在实体类之间表示一对多关系,员工表示所属部门,使用对象类型属性进行表示</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//部门类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//员工类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="comment">//员工属于某一个部门,使用对象形式表示</span></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEname</span><span class="params">(String ename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>在 spring 配置文件中进行配置</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部 bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置对象类型属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;送钱部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>用内部bean的时候，不能通过外部bean调用内部bean</p>
<h4 id="3-7-4-注入属性-级联属性">3.7.4 注入属性-级联属性</h4>
<h5 id="3-7-4-1-第一种写法">3.7.4.1 第一种写法</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部 bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;打人部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-7-4-2-第二种写法">3.7.4.2 第二种写法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="comment">//员工属于某一个部门,使用对象形式表示</span></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//要想向对象获取值,要先获取到对象</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">getDept</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dept;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部 bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;人妖部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-8-IOC操作Bean管理-xml注入集合管理">3.8 IOC操作Bean管理(xml注入集合管理)</h3>
<h4 id="3-8-1-注入数组类型属性、List集合类型属性、Map集合类型属性">3.8.1 注入数组类型属性、List集合类型属性、Map集合类型属性</h4>
<h5 id="3-8-1-1-创建类-定义数组、list、map、set-类型属性-生成对应-set-方法">3.8.1.1 创建类,定义数组、list、map、set 类型属性,生成对应 set 方法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span> &#123;</span><br><span class="line">    <span class="comment">//1 数组类型属性</span></span><br><span class="line">    <span class="keyword">private</span> String[] courses;</span><br><span class="line">    <span class="comment">//2 list 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="comment">//3 map 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; maps;</span><br><span class="line">    <span class="comment">//4 set 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sets;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSets</span><span class="params">(Set&lt;String&gt; sets)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sets = sets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(String[] courses)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-8-1-2-在-spring-配置文件进行配置">3.8.1.2 在 spring 配置文件进行配置</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 集合类型属性注入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数组类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>java课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>数据库课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--list 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--map 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--set 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>MySQL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Redis<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-8-2-在集合里面设置对象类型值">3.8.2 在集合里面设置对象类型值</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注入list集合类型,值是对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--创建多个 course 对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;course1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;JAVA&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;course2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;MYSQL&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-8-3-把集合注入部分提取出来">3.8.3 把集合注入部分提取出来</h4>
<h5 id="3-8-3-1-在-spring-配置文件中引入名称空间-util">3.8.3.1 在 spring 配置文件中引入名称空间 util</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-8-3-2使用-util-标签完成-list-集合注入提取">3.8.3.2使用 util 标签完成 list 集合注入提取</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 提取 list 集合类型属性注入--&gt;</span></span><br><span class="line">N</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--2 提取 list 集合类型属性注入使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-9-IOC操作Bean管理-FactoryBean">3.9 IOC操作Bean管理(FactoryBean)</h3>
<h4 id="3-9-1-Spring有两种类型的bean">3.9.1 Spring有两种类型的bean</h4>
<ol>
<li class="lvl-3">
<p>普通bean</p>
</li>
<li class="lvl-3">
<p>工厂bean(FactoryBean)</p>
</li>
</ol>
<h4 id="3-9-2-普通bean">3.9.2 普通bean</h4>
<p>在配置文件中定义bean类型就是返回类型</p>
<h4 id="3-9-3-工厂bean">3.9.3 工厂bean</h4>
<p>在配置文件定义bean类型可以和返回类型不一样</p>
<h5 id="3-9-3-1-创建类-让这个类作为工厂bean-实现接口FactoryBean">3.9.3.1 创建类,让这个类作为工厂bean,实现接口FactoryBean</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Course&gt; &#123;</span><br><span class="line">    <span class="comment">//定义返回 bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Course <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Course</span>();</span><br><span class="line">        course.setCname(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-9-3-2-实现接口里面的方法-在实现的方法中定义返回的bean类型">3.9.3.2 实现接口里面的方法,在实现的方法中定义返回的bean类型</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.factorybean.MyBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCollection3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean3.xml&quot;</span>);</span><br><span class="line">    <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;myBean&quot;</span>, Course.class);</span><br><span class="line">    System.out.println(course);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-10-IOC操作Bean管理-bean作用域">3.10 IOC操作Bean管理(bean作用域)</h3>
<h4 id="3-10-1-在Spring里面-设置创建bean实例是单实例还是多实例">3.10.1 在Spring里面,设置创建bean实例是单实例还是多实例</h4>
<p>在Spring里面,默认情况下,bean 是单实例对象</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225029294-308097912.png" alt="image-20230406170625868"></p>
<h4 id="3-10-2-如何设置单实例还是多实例">3.10.2 如何设置单实例还是多实例</h4>
<ol>
<li class="lvl-3">
<p>在spring配置文件bean标签里面有属性(scope)用于设置单实例还是多实例</p>
</li>
<li class="lvl-3">
<p>scope属性值</p>
<ul class="lvl-2">
<li class="lvl-5">
<p>第一个值,默认值 singleton 表示是单实例对象</p>
</li>
<li class="lvl-5">
<p>第二个值 prototype 表示是多实例对象</p>
</li>
<li class="lvl-5">
<pre><code class="language-xml">&lt;bean id=&quot;book&quot; class=&quot;com.wmr.spring5.collectiontype.Book&quot; scope=&quot;prototype&quot;&gt;
    &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. singleton和prototype区别</span><br><span class="line"></span><br><span class="line">   1. singleton单实例,prototype多实例</span><br><span class="line">   2. 设置scope值是singleton时候,加载spring配置文件时候就会创建单实例对象</span><br><span class="line">      - 设置scope值是prototype时候,不是在加载spring配置文件时候创建对象,在调用getBean方法时候创建多实例对象</span><br><span class="line"></span><br><span class="line">### 3.11 IOC 操作Bean管理(bean生命周期)</span><br><span class="line">#### 3.11.1 生命周期</span><br><span class="line"></span><br><span class="line">从对象创建到对象销毁的过程</span><br><span class="line"></span><br><span class="line">#### 3.11.2 bean生命周期</span><br><span class="line"></span><br><span class="line">1. 通过构造器创建bean实例(无参数构造)</span><br><span class="line">2. 为bean的属性设置值和对其他bean引用(调用set方法)</span><br><span class="line">3. 调用bean的初始化的方法(需要进行配置初始化的方法)</span><br><span class="line">4. bean可以使用了(对象获取到了)</span><br><span class="line">5. 当容器关闭时候,调用bean的销毁的方法(需要进行配置销毁的方法)</span><br><span class="line"></span><br><span class="line">#### 3.11.3 演示</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class Orders &#123;</span><br><span class="line">    //无参数构造</span><br><span class="line">    public Orders() &#123;</span><br><span class="line">        System.out.println(&quot;第一步 执行无参数构造创建 bean 实例&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String oname;</span><br><span class="line"></span><br><span class="line">    public void setOname(String oname) &#123;</span><br><span class="line">        this.oname = oname;</span><br><span class="line">        System.out.println(&quot;第二步 调用 set 方法设置属性值&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //创建执行的初始化的方法</span><br><span class="line">    public void initMethod() &#123;</span><br><span class="line">        System.out.println(&quot;第三步 执行初始化的方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //创建执行的销毁的方法</span><br><span class="line">    public void destroyMethod() &#123;</span><br><span class="line">        System.out.println(&quot;第五步 执行销毁的方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.Orders&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initMethod&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destroyMethod&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;手机&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBean3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ApplicationContext context =</span></span><br><span class="line">    <span class="comment">// new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);</span></span><br><span class="line">    <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;第四步 获取创建 bean 实例对象&quot;</span>);</span><br><span class="line">    System.out.println(orders);</span><br><span class="line">    <span class="comment">//手动让 bean 实例销毁</span></span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225023958-1337101230.png" alt="image-20230406180141983"></p>
<h4 id="3-11-4-bean的后置处理器-bean生命周期有七步">3.11.4 bean的后置处理器,bean生命周期有七步</h4>
<ol>
<li class="lvl-3">
<p>通过构造器创建bean(实例无参数构造)</p>
</li>
<li class="lvl-3">
<p>为bean的属性设置值和对其他bean引用(调用set方法)</p>
</li>
<li class="lvl-3">
<p>把bean实例传递bean后置处理器的方法 postProcessBeforeInitialization</p>
</li>
<li class="lvl-3">
<p>调用bean的初始化的方法(需要进行配置初始化的方法)</p>
</li>
<li class="lvl-3">
<p>把bean实例传递bean后置处理器的方法 postProcessAfterInitialization</p>
</li>
<li class="lvl-3">
<p>bean可以使用了(对象获取到了)</p>
</li>
<li class="lvl-3">
<p>当容器关闭时候,调用bean的销毁的方法(需要进行配置销毁的方法)</p>
</li>
</ol>
<h4 id="3-11-5-演示加后置处理器效果">3.11.5 演示加后置处理器效果</h4>
<h5 id="3-11-5-1-创建类-实现接口BeanPostProcessor-创建后置处理器">3.11.5.1 创建类,实现接口BeanPostProcessor,创建后置处理器</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPost</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span></span><br><span class="line">            <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在初始化之前执行的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span></span><br><span class="line">            <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在初始化之后执行的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置后置处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBeanPost&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.bean.MyBeanPost&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225022730-295467488.png" alt="image-20230410133326032"></p>
<h3 id="3-12-IOC操作Bean管理-xml自动装配">3.12 IOC操作Bean管理(xml自动装配)</h3>
<h4 id="3-12-1-什么是自动装配">3.12.1 什么是自动装配</h4>
<p>根据指定装配规则(属性名称或者属性类型),Spring自动将匹配的属性值进行注入</p>
<h4 id="3-12-2-演示自动装配过程">3.12.2 演示自动装配过程</h4>
<h5 id="3-12-2-1-根据属性名称自动注入">3.12.2.1 根据属性名称自动注入</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment">     bean 标签属性 autowire,配置自动装配</span></span><br><span class="line"><span class="comment">     autowire 属性常用两个值:</span></span><br><span class="line"><span class="comment">     byName 根据属性名称注入 ,注入值 bean 的 id 值和类属性名称一样</span></span><br><span class="line"><span class="comment">     byType 根据属性类型注入</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-12-2-2-根据属性类型自动注入">3.12.2.2 根据属性类型自动注入</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment">     bean 标签属性 autowire,配置自动装配</span></span><br><span class="line"><span class="comment">     autowire 属性常用两个值:</span></span><br><span class="line"><span class="comment">     byName 根据属性名称注入 ,注入值 bean 的 id 值和类属性名称一样</span></span><br><span class="line"><span class="comment">     byType 根据属性类型注入</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-13-IOC操作Bean管理-外部属性文件">3.13 IOC操作Bean管理(外部属性文件)</h3>
<h4 id="3-13-1-直接配置数据库信息">3.13.1 直接配置数据库信息</h4>
<h5 id="3-13-1-1-配置德鲁伊连接池">3.13.1.1 配置德鲁伊连接池</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--直接配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-13-2-引入外部属性文件配置数据库连接池">3.13.2 引入外部属性文件配置数据库连接池</h4>
<h5 id="3-13-2-1-创建外部属性文件-properties格式文件-写数据库信息">3.13.2.1 创建外部属性文件,properties格式文件,写数据库信息</h5>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225021003-390955477.png" alt="image-20230410141718778"></p>
<h5 id="3-13-2-2-把外部properties属性文件引入到spring配置文件中">3.13.2.2 把外部properties属性文件引入到spring配置文件中</h5>
<ol>
<li class="lvl-3">
<p>引入 context 名称空间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-contet.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>在 spring 配置文件使用标签引入外部属性文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部属性文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.userName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-14-IOC-操作Bean管理-基于注解方式">3.14 IOC 操作Bean管理(基于注解方式)</h3>
<h4 id="3-14-1-什么是注解">3.14.1 什么是注解</h4>
<ol>
<li class="lvl-3">
<p>注解是代码特殊标记,格式:@注解名称(属性名称=属性值,属性名称=属性值…)</p>
</li>
<li class="lvl-3">
<p>使用注解,注解作用在类上面,方法上面,属性上面</p>
</li>
<li class="lvl-3">
<p>使用注解目的:简化xml配置</p>
</li>
</ol>
<h4 id="3-14-2-Spring针对Bean管理中创建对象提供注解">3.14.2 Spring针对Bean管理中创建对象提供注解</h4>
<ol>
<li class="lvl-3">
<p>@Component</p>
</li>
<li class="lvl-3">
<p>@Service</p>
</li>
<li class="lvl-3">
<p>@Controller</p>
</li>
<li class="lvl-3">
<p>@Repository</p>
</li>
</ol>
<p>注:上面四个注解功能是一样的,都可以用来创建bean实例</p>
<h4 id="3-14-3-基于注解方式实现对象创建">3.14.3 基于注解方式实现对象创建</h4>
<h5 id="3-14-3-1-在maven引入依赖">3.14.3.1 在maven引入依赖</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjrt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1_3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-15-3-2-开启组件扫描">3.15.3.2 开启组件扫描</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描</span></span><br><span class="line"><span class="comment">             1 如果扫描多个包,多个包使用逗号隔开</span></span><br><span class="line"><span class="comment">             2 扫描包上层目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wmr.spring5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&quot;com.wmr.spring5.dao,com.wmr.spring5.service&quot;--&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-15-3-3-创建类-在类上面添加创建对象注解">3.15.3.3 创建类,在类上面添加创建对象注解</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在注解里面 value 属性值可以省略不写,</span></span><br><span class="line"><span class="comment">//默认值是类名称,首字母小写</span></span><br><span class="line"><span class="comment">//UserService -- userService</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span>  <span class="comment">//&lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-15-4-开启组件扫描细节配置">3.15.4 开启组件扫描细节配置</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例 1</span></span><br><span class="line"><span class="comment">     use-default-filters=&quot;false&quot; 表示现在不使用默认filter,自己配置 filter</span></span><br><span class="line"><span class="comment">     context:include-filter,设置扫描哪些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wmr&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--示例 2</span></span><br><span class="line"><span class="comment">     下面配置扫描包所有内容</span></span><br><span class="line"><span class="comment">     context:exclude-filter:设置哪些内容不进行扫描</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wmr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-15-5-基于注解方式实现属性注入">3.15.5 基于注解方式实现属性注入</h4>
<h5 id="3-15-5-1-Autowired-根据属性类型进行自动装配">3.15.5.1 @Autowired:根据属性类型进行自动装配</h5>
<ul class="lvl-0">
<li class="lvl-2">
<p>第一步 把 service和dao对象创建,在service和dao类添加创建对象注解</p>
<ul class="lvl-2">
<li class="lvl-4">
<pre><code class="language-java">@Service
public class UserService &#123;
    public void add() &#123;
        System.out.println(&quot;service add.......&quot;);
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @Repository</span><br><span class="line">  public class UserDaoImpl implements UserDao &#123;</span><br><span class="line">      @Override</span><br><span class="line">      public void add() &#123;</span><br><span class="line">          System.out.println(&quot;dao add....&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
<li class="lvl-2">
<p>第二步 在service注入dao对象,在service类添加dao类型属性,在属性上面使用注解</p>
<ul class="lvl-2">
<li class="lvl-4">
<pre><code class="language-java">@Service
public class UserService &#123;

    //定义dao类型的属性
    //不需要添加set方法
    @Autowired  //根据类型注入
    private UserDao userDao;

    public void add() &#123;
        System.out.println(&quot;service add.......&quot;);
        userDao.add();
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 3.15.5.2 @Qualifier:根据名称进行注入</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@Service</span><br><span class="line">public class UserService &#123;</span><br><span class="line"></span><br><span class="line">    //定义dao类型的属性</span><br><span class="line">    //不需要添加set方法</span><br><span class="line">    @Autowired //根据类型注入</span><br><span class="line">    @Qualifier(value = &quot;userDaoImpl1&quot;)//根据名称进行属性注入</span><br><span class="line">    // 当@Autowired注入时发现这个属性有多个实现类,就可以使用@Qualifier来描述注入到哪个类</span><br><span class="line">    private UserDao userDao;</span><br><span class="line"></span><br><span class="line">    public void add() &#123;</span><br><span class="line">        System.out.println(&quot;service add.......&quot;);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
</ul>
<h5 id="3-15-5-3-Resource-可以根据类型注入-可以根据名称注入">3.15.5.3 @Resource:可以根据类型注入,可以根据名称注入</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//定义dao类型的属性</span></span><br><span class="line">    <span class="comment">//不需要添加set方法</span></span><br><span class="line">    <span class="comment">//@Autowired //根据类型注入</span></span><br><span class="line">    <span class="comment">//@Qualifier(value = &quot;userDaoImpl1&quot;)//根据名称进行属性注入</span></span><br><span class="line">    <span class="comment">// 当@Autowired注入时发现这个属性有多个实现类,就可以使用@Qualifier来描述注入到哪个类</span></span><br><span class="line">    <span class="comment">//private UserDao userDao;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Resource  //根据类型注入</span></span><br><span class="line">    <span class="meta">@Resource(name=&quot;userDaoImpl1&quot;)</span> <span class="comment">//根据名称注入</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li class="lvl-3">
<p>@Autowired 是通过 byType 的方式去注入的， 使用该注解，要求接口只能有一个实现类。</p>
</li>
<li class="lvl-3">
<p>@Resource 可以通过 byName 和 byType的方式注入， 默认先按 byName的方式进行匹配，如果匹配不到，再按 byType的方式进行匹配。</p>
</li>
</ol>
<ul class="lvl-1">
<li class="lvl-4">
<p>用 @Resource 注解，注入指定实现类</p>
</li>
<li class="lvl-4">
<pre><code class="language-java">@Resource(name = &quot;personImpl&quot;)
private UserService userService;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;3. @Qualifier 注解可以按名称注入， 但是注意是 类名。</span><br><span class="line"></span><br><span class="line">  - ```java</span><br><span class="line">    @Qualifier(value = &quot;personImpl&quot;)</span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(value = &quot;zsf&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义dao类型的属性</span></span><br><span class="line">    <span class="comment">//不需要添加set方法</span></span><br><span class="line">    <span class="comment">//@Autowired //根据类型注入</span></span><br><span class="line">    <span class="comment">//@Qualifier(value = &quot;userDaoImpl1&quot;)//根据名称进行属性注入</span></span><br><span class="line">    <span class="comment">// 当@Autowired注入时发现这个属性有多个实现类,就可以使用@Qualifier来描述注入到哪个类</span></span><br><span class="line">    <span class="comment">//private UserDao userDao;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Resource  //根据类型注入</span></span><br><span class="line">    <span class="meta">@Resource(name=&quot;userDaoImpl1&quot;)</span> <span class="comment">//根据名称注入</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add.......&quot;</span> + name);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-15-6-完全注解开发">3.15.6 完全注解开发</h4>
<h5 id="3-15-6-1-创建配置类-代替xml配置文件">3.15.6.1 创建配置类,代替xml配置文件</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configurable</span> <span class="comment">//作为配置类,替代xml配置文件</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.wmr&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-15-6-2-测试类">3.15.6.2 测试类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testService2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    System.out.println(userService);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-AOP">4. AOP</h2>
<h3 id="4-1-什么是AOP">4.1 什么是AOP</h3>
<ol>
<li class="lvl-3">
<p>面向切面编程(方面),利用AOP可以对业务逻辑的各个部分进行隔离,从而使得 业务逻辑各部分之间的耦合度降低,提高程序的可重用性,同时提高了开发的效率。</p>
</li>
<li class="lvl-3">
<p>通俗描述:不通过修改源代码方式,在主干功能里面添加新功能</p>
</li>
<li class="lvl-3">
<p>使用登录例子说明AOP</p>
</li>
</ol>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225020100-595283727.png" alt="image-20230411154607006"></p>
<h3 id="4-2-AOP-底层原理">4.2 AOP(底层原理)</h3>
<h4 id="4-2-1-AOP底层使用动态代理">4.2.1 AOP底层使用动态代理</h4>
<p>有两种情况动态代理</p>
<h5 id="4-2-1-1-第一种-有接口情况-使用JDK动态代理">4.2.1.1 第一种:有接口情况,使用JDK动态代理</h5>
<p>创建接口实现类代理对象,增强类的方法</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225019042-256308566.png" alt="image-20230411155015867"></p>
<h5 id="4-2-1-2-第二种-没有接口情况-使用CGLIB动态代理">4.2.1.2 第二种:没有接口情况,使用CGLIB动态代理</h5>
<p>创建子类的代理对象,增强类的方法</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017810-913255998.png" alt="image-20230411155104890"></p>
<h3 id="4-3-AOP-JDK动态代理">4.3 AOP(JDK动态代理)</h3>
<h4 id="4-3-1-使用JDK动态代理-使用Proxy类里面的方法创建代理对象">4.3.1 使用JDK动态代理,使用Proxy类里面的方法创建代理对象</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225017292-839245531.png" alt="image-20230411182942882"></p>
<p>调用newProxyInstance方法</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016901-616638652.png" alt="image-20230411183005467"></p>
<p>方法有三个参数:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>第一参数,类加载器</p>
</li>
<li class="lvl-2">
<p>第二参数,增强方法所在的类,这个类实现的接口,支持多个接口</p>
</li>
<li class="lvl-2">
<p>第三参数,实现这个接口 InvocationHandler,创建代理对象,写增强的部分</p>
</li>
</ul>
<h4 id="4-3-2-编写JDK动态代理代码">4.3.2 编写JDK动态代理代码</h4>
<h5 id="4-3-2-1-创建接口-定义方法">4.3.2.1 创建接口,定义方法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">update</span><span class="params">(String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-3-2-2-创建接口实现类-实现方法">4.3.2.2 创建接口实现类,实现方法</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-3-2-3-使用Proxy类创建接口代理对象">4.3.2.3 使用Proxy类创建接口代理对象</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建接口实现类代理对象</span></span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">        <span class="comment">//Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces,</span></span><br><span class="line">        <span class="comment">//        new InvocationHandler() &#123;</span></span><br><span class="line">        <span class="comment">//            @Override</span></span><br><span class="line">        <span class="comment">//            public Object invoke(Object proxy, Method method, Object[] args)</span></span><br><span class="line">        <span class="comment">//                    throws</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Throwable &#123;</span></span><br><span class="line">        <span class="comment">//return null;</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="comment">//&#125;);</span></span><br><span class="line">        <span class="type">UserDaoImpl</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> dao.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result:&quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建代理对象代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//1 把创建的是谁的代理对象,把谁传递过来</span></span><br><span class="line">    <span class="comment">//有参数构造传递</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增强的逻辑</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span></span><br><span class="line">            Throwable &#123;</span><br><span class="line">        <span class="comment">//方法之前</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法之前执行....&quot;</span> + method.getName() + <span class="string">&quot; :传递的参数...&quot;</span> + Arrays.toString(args));</span><br><span class="line">        <span class="comment">//被增强的方法执行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line">        <span class="comment">//方法之后</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法之后执行....&quot;</span> + obj);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-AOP-术语">4.4 AOP(术语)</h3>
<h4 id="4-4-1-连接点">4.4.1 连接点</h4>
<p>类里面哪些方法可以被增强,这些方法称为连接点</p>
<h4 id="4-4-2-切入点">4.4.2 切入点</h4>
<p>实际被增强的方法叫切入点</p>
<h4 id="4-4-3-通知-增强">4.4.3 通知(增强)</h4>
<ol>
<li class="lvl-3">
<p>实际增强的逻辑部分被称为通知(增强)</p>
</li>
<li class="lvl-3">
<p>通知有多种类型</p>
<ol>
<li class="lvl-6">前置通知</li>
<li class="lvl-6">后置通知</li>
<li class="lvl-6">环绕通知</li>
<li class="lvl-6">异常通知</li>
<li class="lvl-6">最终通知</li>
</ol>
</li>
</ol>
<h4 id="4-4-4-切面">4.4.4 切面</h4>
<p>把通知应用到切入点过程</p>
<h3 id="4-5-AOP操作-准备">4.5 AOP操作(准备)</h3>
<h4 id="4-5-1-Spring框架一般都是基于AspectJ实现AOP操作">4.5.1 Spring框架一般都是基于AspectJ实现AOP操作</h4>
<p>AspectJ不是Spring组成部分,独立AOP框架,一般把AspectJ和Spirng框架一起使用,进行AOP操作</p>
<h4 id="4-5-2-基于AspectJ实现AOP操作">4.5.2 基于AspectJ实现AOP操作</h4>
<ol>
<li class="lvl-3">
<p>基于xml配置文件实现</p>
</li>
<li class="lvl-3">
<p>基于注解方式实现（使用）</p>
</li>
</ol>
<h4 id="4-5-3-在maven导入相关依赖">4.5.3 在maven导入相关依赖</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjrt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-5-4-切入点表达式">4.5.4 切入点表达式</h4>
<ol>
<li class="lvl-3">
<p>切入点表达式作用:知道对哪个类里面的哪个方法进行增强</p>
</li>
<li class="lvl-3">
<p>语法结构:execution([权限修饰符] [返回类型] [类全路径] [方法名称] ([参数列表])</p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p>举例 1:对 com.wmr.dao.BookDao 类里面的 add 进行增强 execution(* com.wmr.dao.BookDao.add(…))</p>
</li>
<li class="lvl-2">
<p>举例 2:对 com.wmr.dao.BookDao 类里面的所有的方法进行增强 execution(* com.wmr.dao.BookDao.* (…))</p>
</li>
<li class="lvl-2">
<p>举例 3:对 com.wmr.dao 包里面所有类,类里面所有方法进行增强 execution(* com.wmr.dao.* .*(…))</p>
</li>
</ul>
<h3 id="4-6-AOP-AspectJ-注解">4.6 AOP(AspectJ 注解)</h3>
<h4 id="4-6-1-创建类-在类里面定义方法">4.6.1 创建类,在类里面定义方法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//被增强的类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-2-创建增强类-编写增强逻辑）">4.6.2 创建增强类(编写增强逻辑）</h4>
<h5 id="4-6-2-1-在增强类里面-创建方法-让不同方法代表不同通知类型">4.6.2.1 在增强类里面,创建方法,让不同方法代表不同通知类型</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;<span class="comment">//前置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-3-进行通知的配置">4.6.3 进行通知的配置</h4>
<h5 id="4-6-3-1-在sprin配置文件中-开启注解扫描">4.6.3.1 在sprin配置文件中,开启注解扫描</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 开启注解扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wmr.spring5.aopanno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="4-6-3-2-使用注解创建User和UserProxy对象">4.6.3.2 使用注解创建User和UserProxy对象</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//被增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;<span class="comment">//前置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-6-3-3-在增强类上面添加注解-Aspec">4.6.3.3 在增强类上面添加注解@Aspec</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;<span class="comment">//前置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-6-3-4-在sprin配置文件中开启生成代理对象">4.6.3.4 在sprin配置文件中开启生成代理对象</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启Aspect生成代理对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-6-4-配置不同类型的通知">4.6.4 配置不同类型的通知</h4>
<h5 id="4-6-4-1-在增强类的里面-在作为通知方法上面添加通知类型注解-使用切入点表达式配置">4.6.4.1 在增强类的里面,在作为通知方法上面添加通知类型注解,使用切入点表达式配置</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//后置通知（返回通知）</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//最终通知</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//异常通知</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//环绕通知</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;环绕之前.........&quot;</span>);</span><br><span class="line">        <span class="comment">//被增强的方法执行</span></span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;环绕之后.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-5-相同的切入点抽取">4.6.5 相同的切入点抽取</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相同切入点抽取</span></span><br><span class="line"><span class="meta">@Pointcut(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointdemo</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//前置通知</span></span><br><span class="line"><span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line"><span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//后置通知（返回通知）</span></span><br><span class="line"><span class="meta">@AfterReturning(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;afterReturning.........&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-6-有多个增强类多同一个方法进行增强-设置增强类优先级">4.6.6 有多个增强类多同一个方法进行增强,设置增强类优先级</h4>
<h5 id="4-6-6-1-在增强类上面添加注解-Order-数字类型值-数字类型值越小优先级越高">4.6.6.1 在增强类上面添加注解@Order(数字类型值),数字类型值越小优先级越高</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span> &#123;</span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.wmr.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Person Before.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-7-完全使用注解开发">4.6.7 完全使用注解开发</h4>
<h5 id="4-6-7-1-创建配置类-不需要创建xml配置文件">4.6.7.1 创建配置类,不需要创建xml配置文件</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configurable</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.wmr.spring5&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAop</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-7-AOP操作-AspectJ配置文件">4.7 AOP操作(AspectJ配置文件)</h3>
<h4 id="4-7-1-创建两个类-增强类和被增强类-创建方法">4.7.1 创建两个类,增强类和被增强类,创建方法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;buy......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-7-2-在spring配置文件中创建两个类对象">4.7.2 在spring配置文件中创建两个类对象</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookProxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wmr.spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-7-3-在spring配置文件中配置切入点">4.7.3 在spring配置文件中配置切入点</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置aop增强--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--切入点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.wmr.spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookProxy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--增强作用在具体方法上--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-JdbcTemplate">5. JdbcTemplate</h2>
<h3 id="5-1-什么是JdbcTemplate">5.1 什么是JdbcTemplate</h3>
<p>Spring框架对JDBC进行封装,使用JdbcTemplate方便实现对数据库操作</p>
<h3 id="5-2-准备工作">5.2 准备工作</h3>
<h4 id="5-2-1-在maven中导入相关依赖">5.2.1 在maven中导入相关依赖</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-2-在spring配置文件配置数据库连接池">5.2.2 在spring配置文件配置数据库连接池</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-3-配置JdbcTemplate对象-注入DataSource">5.2.3 配置JdbcTemplate对象,注入DataSource</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JdbcTemplate 对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入 dataSource--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-4-创建service类-创建dao类-在dao注入jdbcTemplate对象">5.2.4 创建service类,创建dao类,在dao注入jdbcTemplate对象</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wmr.spring5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//注入dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//注入JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-JdbcTemplate操作数据库-添加">5.3 JdbcTemplate操作数据库(添加)</h3>
<h4 id="5-3-1-对应数据库创建实体类">5.3.1 对应数据库创建实体类</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String ustatus;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUstatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ustatus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUstatus</span><span class="params">(String ustatus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ustatus = ustatus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-3-2-编写-service-和-dao">5.3.2 编写 service 和 dao</h4>
<ol>
<li class="lvl-3">
<p>在dao进行数据库添加操作</p>
</li>
<li class="lvl-3">
<p>调用JdbcTemplate对象里update方法实现添加操作</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225016376-1096343425.png" alt="image-20230412184938386"></p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p>需要向里面添加两个参数:</p>
<ul class="lvl-2">
<li class="lvl-4">第一个:sql语句</li>
<li class="lvl-4">第二个:可变参数,设置sql语句的值</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注入JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="comment">//创建sql语句</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_boook values(?,?,?)&quot;</span>;</span><br><span class="line">        Object[] args = &#123;book.getId(), book.getUsername(), book.getUstatus()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, args);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-3-3-测试类">5.3.3 测试类</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    book.setUsername(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    bookService.addBook(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225015351-1328960522.png" alt="image-20230412190602792"></p>
<h3 id="5-4-JdbcTemplate操作数据库-修改和删除">5.4 JdbcTemplate操作数据库(修改和删除)</h3>
<h4 id="5-4-1-修改">5.4.1 修改</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=? &quot;</span>;</span><br><span class="line">    Object[] args = &#123;book.getUsername(), book.getUstatus(), book.getId()&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, args);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-4-2-删除">5.4.2 删除</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    jdbcTemplate.update(sql, id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-5-JdbcTemplate操作数据库-查询返回某个值">5.5 JdbcTemplate操作数据库(查询返回某个值)</h3>
<ol>
<li class="lvl-3">
<p>查询表里面有多少条记录,返回是某个值</p>
</li>
<li class="lvl-3">
<p>使用JdbcTemplate实现查询返回某个值代码</p>
</li>
</ol>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225013207-117652476.png" alt="image-20230413150312015"></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>需要填入两个参数:</p>
<ul class="lvl-2">
<li class="lvl-4">第一个参数:sql语句</li>
<li class="lvl-4">第二个参数:返回的类型 Class</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-6-JdbcTemplate操作数据库-查询返回对象">5.6 JdbcTemplate操作数据库(查询返回对象)</h3>
<h4 id="5-6-1-使用场景">5.6.1 使用场景</h4>
<p>查询图书列表分页…</p>
<h4 id="5-6-2-调用JdbcTemplate方法实现查询返回集合">5.6.2 调用JdbcTemplate方法实现查询返回集合</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png" alt="image-20230413152236911"></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>需要传入三个参数:</p>
<ul class="lvl-2">
<li class="lvl-4">第一个参数:sql语句</li>
<li class="lvl-4">第二个参数:RowMapper是接口,针对返回不同类型数据,使用这个接口里面实现类完成 数据封装</li>
<li class="lvl-4">第三个参数:sql语句值</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Book <span class="title function_">findBookInfo</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class), id);</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-7-JdbcTemplate-操作数据库-批量操作">5.7 JdbcTemplate 操作数据库(批量操作)</h3>
<h4 id="5-7-1-使用场景">5.7.1 使用场景</h4>
<p>查询图书列表分页…</p>
<h4 id="5-7-2-调用-JdbcTemplate-方法实现查询返回集合">5.7.2 调用 JdbcTemplate 方法实现查询返回集合</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010786-426014797.png" alt="image-20230413152236911"></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>需要传入三个参数:</p>
<ul class="lvl-2">
<li class="lvl-4">第一个参数:sql语句</li>
<li class="lvl-4">第二个参数:RowMapper是接口,针对返回不同类型数据,使用这个接口里面实现类完成 数据封装</li>
<li class="lvl-4">第三个参数:sql语句值</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询返回集合</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAllBook</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">    <span class="comment">//调用方法</span></span><br><span class="line">    List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line">    <span class="keyword">return</span> bookList;</span><br></pre></td></tr></table></figure>
<h3 id="5-8-JdbcTemplate操作数据库-批量操作">5.8 JdbcTemplate操作数据库(批量操作)</h3>
<h4 id="5-8-1-批量操作">5.8.1 批量操作</h4>
<p>操作表里面多条记录</p>
<h4 id="5-8-2-JdbcTemplate实现批量添加操作">5.8.2 JdbcTemplate实现批量添加操作</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225010448-1097867633.png" alt="image-20230413152915954"></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>需要两个参数:</p>
<ul class="lvl-2">
<li class="lvl-4">第一个参数:sql</li>
<li class="lvl-4">第二个参数:List集合,添加多条记录数据</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量添加测试</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>,<span class="string">&quot;c++&quot;</span>,<span class="string">&quot;b&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;5&quot;</span>,<span class="string">&quot;MySQL&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用批量添加</span></span><br><span class="line">bookService.batchAdd(batchArgs);</span><br></pre></td></tr></table></figure>
<h4 id="5-8-3-JdbcTemplate实现批量修改操作">5.8.3 JdbcTemplate实现批量修改操作</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdateBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?, ustatus=? where user_id=? &quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(ints);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量修改</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;java0909&quot;</span>,<span class="string">&quot;a3&quot;</span>,<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;c++1010&quot;</span>,<span class="string">&quot;b4&quot;</span>,<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;MySQL1111&quot;</span>,<span class="string">&quot;c5&quot;</span>,<span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用方法实现批量修改</span></span><br><span class="line">bookService.batchUpdate(batchArgs);</span><br></pre></td></tr></table></figure>
<h4 id="5-8-4-JdbcTemplate实现批量删除操作">5.8.4 JdbcTemplate实现批量删除操作</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchDeleteBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line"><span class="comment">//调用方法实现批量删除</span></span><br><span class="line">bookService.batchDelete(batchArgs);</span><br></pre></td></tr></table></figure>
<h2 id="6-事务">6. 事务</h2>
<h3 id="6-1-什么事务">6.1 什么事务</h3>
<ol>
<li class="lvl-3">
<p>事务是数据库操作最基本单元,逻辑上一组操作,要么都成功,如果有一个失败所有操 作都失败</p>
</li>
<li class="lvl-3">
<p>典型场景:银行转账</p>
<ul class="lvl-2">
<li class="lvl-5">lucy转账100元给mary</li>
<li class="lvl-5">lucy少100,mary多100</li>
</ul>
</li>
</ol>
<h3 id="6-2-事务四个特性-ACID">6.2 事务四个特性(ACID)</h3>
<ol>
<li class="lvl-3">
<p>原子性</p>
</li>
<li class="lvl-3">
<p>一致性</p>
</li>
<li class="lvl-3">
<p>隔离性</p>
</li>
<li class="lvl-3">
<p>持久性</p>
</li>
</ol>
<h3 id="6-3-事务操作-搭建事务操作环境">6.3 事务操作(搭建事务操作环境)</h3>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009968-245466580.png" alt="image-20230413161907360"></p>
<h4 id="6-3-1-创建数据库-添加记录">6.3.1 创建数据库,添加记录</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009415-1211147445.png" alt="image-20230413163302109"></p>
<h4 id="6-3-2-创建service-搭建dao-完成对象创建和注入关系">6.3.2 创建service,搭建dao,完成对象创建和注入关系</h4>
<p>service注入dao,在dao注入JdbcTemplate,在JdbcTemplate注入 DataSource</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-3-3-在dao创建两个方法-多钱和少钱的方法-在service创建方法-转账的方法">6.3.3 在dao创建两个方法:多钱和少钱的方法,在service创建方法(转账的方法)</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lucy转100给mary</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money-? where username=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduceMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money+? where username=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//转账的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accountMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//lucy 少 100</span></span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line">        <span class="comment">//mary 多 100</span></span><br><span class="line">        userDao.addMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-3-4-上面代码在执行过程中出现异常-会有问题">6.3.4 上面代码在执行过程中出现异常,会有问题</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转账的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accountMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//lucy 少 100</span></span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//模拟异常</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//mary 多 100</span></span><br><span class="line">        userDao.addMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225009024-1668862787.png" alt="image-20230414143808474"></p>
<h5 id="6-3-4-1-如何解决问题">6.3.4.1 如何解决问题</h5>
<p>使用事务解决</p>
<p>Spring自带的事务管理真好用</p>
<h5 id="6-3-4-2-事务操作过程">6.3.4.2 事务操作过程</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转账的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accountMoney</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//进行业务操作</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//lucy 少 100</span></span><br><span class="line">            userDao.reduceMoney();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//模拟异常</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//mary 多 100</span></span><br><span class="line">            userDao.addMoney();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//没有发生异常,提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">//出现异常,事务的回滚</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-4-事务操作-Spring事务管理介绍">6.4 事务操作(Spring事务管理介绍)</h3>
<h4 id="6-4-1-事务添加的位置">6.4.1 事务添加的位置</h4>
<p>事务添加到JavaEE三层结构里面Service层(业务逻辑层)</p>
<h4 id="6-4-2-在Spring进行事务管理操作">6.4.2 在Spring进行事务管理操作</h4>
<p>有两种方式:编程式事务管理和声明式事务管理(使用)</p>
<h4 id="6-4-3-声明式事务管理">6.4.3 声明式事务管理</h4>
<ol>
<li class="lvl-3">
<p>基于xml配置文件方式</p>
</li>
<li class="lvl-3">
<p>基于注解方式(使用)</p>
</li>
</ol>
<h4 id="6-4-4-在Spring进行声明式事务管理-底层使用AOP原理">6.4.4 在Spring进行声明式事务管理,底层使用AOP原理</h4>
<h4 id="6-4-5-Spring事务管理API">6.4.5 Spring事务管理API</h4>
<h5 id="6-4-5-1-提供一个接口-代表事务管理器-这个接口针对不同的框架提供不同的实现类">6.4.5.1 提供一个接口,代表事务管理器,这个接口针对不同的框架提供不同的实现类</h5>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225008190-562720078.png" alt="image-20230414193819629"></p>
<p>根据不同的情况提供了不同的实现类</p>
<h3 id="6-5-事务操作-注解声明式事务管理">6.5 事务操作(注解声明式事务管理)</h3>
<h4 id="6-5-1-在spring配置文件配置事务管理器">6.5.1 在spring配置文件配置事务管理器</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="6-5-2-在spring配置文件-开启事务注解">6.5.2 在spring配置文件,开启事务注解</h4>
<h5 id="6-5-2-1-在spring配置文件引入名称空间tx">6.5.2.1 在spring配置文件引入名称空间tx</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="6-5-2-2-开启事务注解">6.5.2.2 开启事务注解</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启事务注解--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="6-5-3-在service类上面-或者service类里面方法上面-添加事务注解">6.5.3 在service类上面(或者service类里面方法上面)添加事务注解</h4>
<ol>
<li class="lvl-3">
<p>@Transactional,这个注解添加到类上面,也可以添加方法上面</p>
</li>
<li class="lvl-3">
<p>如果把这个注解添加类上面,这个类里面所有的方法都添加事务</p>
</li>
<li class="lvl-3">
<p>如果把这个注解添加方法上面,为这个方法添加事务</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转账的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accountMoney</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//try &#123;</span></span><br><span class="line">            <span class="comment">//开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//进行业务操作</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//lucy 少 100</span></span><br><span class="line">            userDao.reduceMoney();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//模拟异常</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//mary 多 100</span></span><br><span class="line">            userDao.addMoney();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//没有发生异常,提交事务</span></span><br><span class="line">        <span class="comment">//&#125; catch (Exception e) &#123;</span></span><br><span class="line">        <span class="comment">//    //出现异常,事务的回滚</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-6-事务操作-声明式事务管理参数配置">6.6 事务操作(声明式事务管理参数配置)</h3>
<h4 id="6-6-1-在service类上面添加注解-Transactional-在这个注解里面可以配置事务相关参数">6.6.1 在service类上面添加注解@Transactional,在这个注解里面可以配置事务相关参数</h4>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225006656-181017548.png" alt="image-20230414200254993"></p>
<h4 id="6-6-2-propagation-事务传播行为">6.6.2 propagation:事务传播行为</h4>
<h5 id="6-6-2-1-当一个事务方法被另外一个事务方法调用时候-这个事务方法如何进行">6.6.2.1 当一个事务方法被另外一个事务方法调用时候,这个事务方法如何进行</h5>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225004925-138125066.png" alt="image-20230414200508941"></p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415225000202-944398982.png" alt="image-20230414200520546"></p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224959586-1938022105.png" alt="image-20230414200534257"></p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958862-718896188.png" alt="image-20230414200551534"></p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224958050-1510114155.png" alt="image-20230414202212263"></p>
<h4 id="6-6-3-ioslation-事务隔离级别">6.6.3 ioslation:事务隔离级别</h4>
<ol>
<li class="lvl-3">
<p>事务有特性成为隔离性,多事务操作之间不会产生影响。不考虑隔离性产生很多问题</p>
</li>
<li class="lvl-3">
<p>有三个读问题:脏读、不可重复读、虚(幻)读</p>
</li>
<li class="lvl-3">
<p>脏读:一个未提交事务读取到另一个未提交事务的数据</p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224956317-301982826.png" alt="image-20230414201101258"></p>
</li>
</ul>
<ol start="4">
<li class="lvl-3">
<p>不可重复读:一个未提交事务读取到另一提交事务修改数据</p>
<ul class="lvl-2">
<li class="lvl-5"><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955711-1709432265.png" alt="image-20230414201124352"></li>
</ul>
</li>
<li class="lvl-3">
<p>虚读:一个未提交事务读取到另一提交事务添加数据</p>
</li>
<li class="lvl-3">
<p>解决:通过设置事务隔离级别,解决读问题</p>
<ul class="lvl-2">
<li class="lvl-5">
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224955110-1131072967.png" alt="image-20230414201151278"></p>
</li>
<li class="lvl-5">
<pre><code class="language-java">@Service
@Transactional(propagation = Propagation.REQUIRED,isolation = Isolation.REPEATABLE_READ)
public class UserService &#123;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 6.6.4 timeout:超时时间</span><br><span class="line"></span><br><span class="line">1. 事务需要在一定时间内进行提交,如果不提交进行回滚</span><br><span class="line">2. 默认值是-1,设置时间以秒单位进行计算</span><br><span class="line"></span><br><span class="line">#### 6.6.5 readOnly:是否只读</span><br><span class="line"></span><br><span class="line">1. 读:查询操作,写:添加修改删除操作</span><br><span class="line">2. readOnly 默认值 false,表示可以查询,可以添加修改删除操作</span><br><span class="line">3. 设置 readOnly 值是 true,设置成 true 之后,只能查询</span><br><span class="line"></span><br><span class="line">#### 6.6.6 rollbackFor:回滚</span><br><span class="line"></span><br><span class="line">1. 设置出现哪些异常进行事务回滚</span><br><span class="line"></span><br><span class="line">#### 6.6.7 noRollbackFor:不回滚</span><br><span class="line"></span><br><span class="line">1. 设置出现哪些异常不进行事务回滚</span><br><span class="line"></span><br><span class="line">### 6.7 事务操作(XML声明式事务管理)</span><br><span class="line">#### 6.7.1 在spring配置文件中进行配置</span><br><span class="line"></span><br><span class="line">- 第一步 配置事务管理器</span><br><span class="line">- 第二步 配置通知</span><br><span class="line">- 第三步 配置切入点和切面</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;!--配置通知--&gt;</span><br><span class="line">    &lt;tx:advice id=&quot;txadvice&quot;&gt;</span><br><span class="line">        &lt;!--配置事务参数--&gt;</span><br><span class="line">        &lt;tx:attributes&gt;</span><br><span class="line">            &lt;!--指定哪种规则的方法上面添加事务--&gt;</span><br><span class="line">            &lt;tx:method name=&quot;accountMoney&quot; propagation=&quot;REQUIRED&quot;/&gt;</span><br><span class="line">            &lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt;</span><br><span class="line">        &lt;/tx:attributes&gt;</span><br><span class="line">    &lt;/tx:advice&gt;</span><br><span class="line">    &lt;!--配置切入点和切面--&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">        &lt;!--配置切入点--&gt;</span><br><span class="line">        &lt;aop:pointcut id=&quot;pt&quot; expression=&quot;execution(*</span><br><span class="line">com.wmr.spring5.service.UserService.*(..))&quot;/&gt;</span><br><span class="line">        &lt;!--配置切面--&gt;</span><br><span class="line">        &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pt&quot;/&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="6-8-事务操作-完全注解声明式事务管理">6.8 事务操作(完全注解声明式事务管理)</h3>
<h4 id="6-8-1-创建配置类-使用配置类替代xml配置文件">6.8.1 创建配置类,使用配置类替代xml配置文件</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.wmr.spring5&quot;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span> <span class="comment">//开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建数据库的连接池</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/user_db&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建JdbcTemplate对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//注入dataSource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建事务管理器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-Spring5框架新功能">7. Spring5框架新功能</h2>
<p>整个Spring5框架的代码基于Java8,运行时兼容JDK9,许多不建议使用的类和方 法在代码库中删除</p>
<h3 id="7-1-Spring5-0框架自带了通用的日志封装">7.1 Spring5.0框架自带了通用的日志封装</h3>
<ol>
<li class="lvl-3">
<p>Spring5已经移除 Log4jConfigListener,官方建议使用Log4j2</p>
</li>
<li class="lvl-3">
<p>Spring5框架整合 Log4j2</p>
</li>
</ol>
<h4 id="7-1-1-在maven引入相关的包">7.1.1 在maven引入相关的包</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.18.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.18.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.18.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="7-1-2-创建创建log4j2-xml配置文件">7.1.2 创建创建log4j2.xml配置文件</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt;</span></span><br><span class="line"><span class="comment">ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configuration 后面的 status 用于设置 log4j2 自身内部的信息输出,可以不设置,</span></span><br><span class="line"><span class="comment">当设置成 trace 时,可以看到 log4j2 内部各种详细输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--先定义所有的 appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--输出日志信息到控制台--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--控制日志输出的格式--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-</span></span></span><br><span class="line"><span class="string"><span class="tag">5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--然后定义 logger,只有定义 logger 并引入的 appender,appender 才会生效--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--root：用于指定项目的根日志,如果没有单独指定 Logger,则会使用 root 作为</span></span><br><span class="line"><span class="comment">   默认的日志输出--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="7-1-3-Spring5框架核心容器支持-Nullable注解">7.1.3 Spring5框架核心容器支持@Nullable注解</h4>
<h5 id="7-1-3-1-Nullable注解介绍">7.1.3.1 @Nullable注解介绍</h5>
<p>@Nullable注解可以使用在方法上面,属性上面,参数上面,表示方法返回可以为空,属性值可以为空,参数值可以为空</p>
<h6 id="7-1-3-1-2-注解用在方法上面-方法返回值可以为空">7.1.3.1.2 注解用在方法上面,方法返回值可以为空</h6>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png" alt="image-20230415153851732"></p>
<h6 id="7-1-3-1-3-注解使用在方法参数里面-方法参数可以为空">7.1.3.1.3 注解使用在方法参数里面,方法参数可以为空</h6>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224954008-1415699408.png" alt="image-20230415153851732"></p>
<h6 id="7-1-3-1-4-注解使用在属性上面-属性值可以为空、">7.1.3.1.4 注解使用在属性上面,属性值可以为空、</h6>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224953279-1227107174.png" alt="image-20230415154027895"></p>
<h4 id="7-1-4-Spring5核心容器支持函数式风格GenericApplicationContext">7.1.4 Spring5核心容器支持函数式风格GenericApplicationContext</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数式风格创建对象,交给 spring 进行管理</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenericApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1 创建 GenericApplicationContext 对象</span></span><br><span class="line">    <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line">    <span class="comment">//2 调用 context 的方法对象注册</span></span><br><span class="line">    context.refresh();</span><br><span class="line">    context.registerBean(<span class="string">&quot;user1&quot;</span>, User.class,() -&gt; <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">    <span class="comment">//3 获取在 spring 注册的对象</span></span><br><span class="line">    <span class="comment">// User user = (User)context.getBean(&quot;com.wmr.spring5.test.User&quot;);</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User)context.getBean(<span class="string">&quot;user1&quot;</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-1-5-Spring5支持整合JUnit5">7.1.5 Spring5支持整合JUnit5</h4>
<h5 id="7-1-5-1-整合JUnit4">7.1.5.1 整合JUnit4</h5>
<p>第一步 引入Spring相关针对测试依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第二步 创建测试类,使用注解方式完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.accountMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-1-5-2-Spring5整合JUnit5">7.1.5.2 Spring5整合JUnit5</h5>
<p>第一步 引入JUnit5的jar包</p>
<p><img src="https://img2023.cnblogs.com/blog/2914114/202304/2914114-20230415224949557-861548059.png" alt="image-20230415195917735"></p>
<p>第二步 创建测试类,使用注解完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExtendWith(SpringExtension.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.accountMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-1-5-3-使用一个复合注解替代上面两个注解完成整合">7.1.5.3 使用一个复合注解替代上面两个注解完成整合</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.accountMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/Spring/">Spring, </a><a class="link-muted" rel="tag" href="/tags/Java/">Java </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/SpringMVC/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">SpringMVC</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/draft/"><span class="level-item">草稿</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">コメント</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "3955c7aeee702c111e1c596662079cef",
            repo: "gitakl-of-blog",
            owner: "ooblivion",
            clientID: "6bea2c6278330432d92a",
            clientSecret: "73368b02db64f5a4bb7fcd96bfc584a0dc7e20c7",
            admin: ["ooblivion"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "en",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/doctor.png" alt="orange"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">orange</p><p class="is-size-6 is-block">必死に積み上げてきたものは決して裏切りません</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>北海道 札幌市</span></p></div></div></nav><nav class="level is-mobile"><a class="level-item has-text-centered is-marginless" href="/categories"><div><p class="heading">投稿</p><div><p class="title">50</p></div></div></a><div class="level-item has-text-centered is-marginless"><div><p class="heading">カテゴリ</p><a href="/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">タグ</p><a href="/tags"><p class="title">47</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ooblivion"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Qiita" href="https://qiita.com/ooblivion"><i class="fab fa-q"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Certificate" href="https://www.credly.com/users/wentao-wu.2fb450f4"><i class="fas fa-certificate"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Stackoverflow" href="https://stackoverflow.com/users/11994542/orange"><i class="fab fa-stack-overflow"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="E-mail" href="mailto:XXX@XXX.com"><i class="fa-solid fa-envelope"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目次</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-Spring框架概述"><span class="level-left"><span class="level-item">1</span><span class="level-item">1. Spring框架概述</span></span></a></li><li><a class="level is-mobile" href="#2-入门案例"><span class="level-left"><span class="level-item">2</span><span class="level-item">2. 入门案例</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1-创建普通类-创建方法"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">2.1 创建普通类,创建方法</span></span></a></li><li><a class="level is-mobile" href="#2-2-创建Spring配置-在配置文件中创建对象"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">2.2 创建Spring配置,在配置文件中创建对象</span></span></a></li><li><a class="level is-mobile" href="#2-3-进行测试代码编写"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">2.3 进行测试代码编写</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-IOC"><span class="level-left"><span class="level-item">3</span><span class="level-item">3. IOC</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-什么是IOC"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">3.1 什么是IOC</span></span></a></li><li><a class="level is-mobile" href="#3-2-IOC底层原理"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">3.2 IOC底层原理</span></span></a></li><li><a class="level is-mobile" href="#3-3-画图讲解IOC底层原理"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">3.3 画图讲解IOC底层原理</span></span></a></li><li><a class="level is-mobile" href="#3-4-IOC-BeanFactory接口"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">3.4 IOC(BeanFactory接口)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-4-1-IOC底层"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">3.4.1 IOC底层</span></span></a></li><li><a class="level is-mobile" href="#3-4-2-Spring提供IOC容器实现的两种方式-两个接口"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item">3.4.2 Spring提供IOC容器实现的两种方式:(两个接口)</span></span></a></li><li><a class="level is-mobile" href="#3-4-3-ApplicationContext接口有实现类"><span class="level-left"><span class="level-item">3.4.3</span><span class="level-item">3.4.3 ApplicationContext接口有实现类</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-5-IOC操作Bean管理-概念"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">3.5 IOC操作Bean管理(概念)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-5-1-什么是Bean管理"><span class="level-left"><span class="level-item">3.5.1</span><span class="level-item">3.5.1 什么是Bean管理</span></span></a></li><li><a class="level is-mobile" href="#3-5-2-Bean管理操作有两种方式"><span class="level-left"><span class="level-item">3.5.2</span><span class="level-item">3.5.2 Bean管理操作有两种方式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-6-IOC操作Bean管理-基于XML方式"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">3.6 IOC操作Bean管理(基于XML方式)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-6-1-基于xml方式创建对象"><span class="level-left"><span class="level-item">3.6.1</span><span class="level-item">3.6.1 基于xml方式创建对象</span></span></a></li><li><a class="level is-mobile" href="#3-6-2-基于xml方式注入属性"><span class="level-left"><span class="level-item">3.6.2</span><span class="level-item">3.6.2 基于xml方式注入属性</span></span></a></li><li><a class="level is-mobile" href="#3-6-3-在spring中-第一种注入方式-使用set方法进行注入"><span class="level-left"><span class="level-item">3.6.3</span><span class="level-item">3.6.3 在spring中:第一种注入方式,使用set方法进行注入</span></span></a></li><li><a class="level is-mobile" href="#3-6-4-在spring中-第二种注入方式-使用有参构造器进行注入"><span class="level-left"><span class="level-item">3.6.4</span><span class="level-item">3.6.4 在spring中:第二种注入方式,使用有参构造器进行注入</span></span></a></li><li><a class="level is-mobile" href="#3-6-5-p名称空间注入"><span class="level-left"><span class="level-item">3.6.5</span><span class="level-item">3.6.5 p名称空间注入</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-7-IOC操作Bean管理-xml注入其他类型属性"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">3.7 IOC操作Bean管理(xml注入其他类型属性)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-7-1-字面量"><span class="level-left"><span class="level-item">3.7.1</span><span class="level-item">3.7.1 字面量</span></span></a></li><li><a class="level is-mobile" href="#3-7-2-注入属性-外部bean"><span class="level-left"><span class="level-item">3.7.2</span><span class="level-item">3.7.2 注入属性-外部bean</span></span></a></li><li><a class="level is-mobile" href="#3-7-3-注入属性-内部bean"><span class="level-left"><span class="level-item">3.7.3</span><span class="level-item">3.7.3 注入属性-内部bean</span></span></a></li><li><a class="level is-mobile" href="#3-7-4-注入属性-级联属性"><span class="level-left"><span class="level-item">3.7.4</span><span class="level-item">3.7.4 注入属性-级联属性</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-8-IOC操作Bean管理-xml注入集合管理"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">3.8 IOC操作Bean管理(xml注入集合管理)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-8-1-注入数组类型属性、List集合类型属性、Map集合类型属性"><span class="level-left"><span class="level-item">3.8.1</span><span class="level-item">3.8.1 注入数组类型属性、List集合类型属性、Map集合类型属性</span></span></a></li><li><a class="level is-mobile" href="#3-8-2-在集合里面设置对象类型值"><span class="level-left"><span class="level-item">3.8.2</span><span class="level-item">3.8.2 在集合里面设置对象类型值</span></span></a></li><li><a class="level is-mobile" href="#3-8-3-把集合注入部分提取出来"><span class="level-left"><span class="level-item">3.8.3</span><span class="level-item">3.8.3 把集合注入部分提取出来</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-9-IOC操作Bean管理-FactoryBean"><span class="level-left"><span class="level-item">3.9</span><span class="level-item">3.9 IOC操作Bean管理(FactoryBean)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-9-1-Spring有两种类型的bean"><span class="level-left"><span class="level-item">3.9.1</span><span class="level-item">3.9.1 Spring有两种类型的bean</span></span></a></li><li><a class="level is-mobile" href="#3-9-2-普通bean"><span class="level-left"><span class="level-item">3.9.2</span><span class="level-item">3.9.2 普通bean</span></span></a></li><li><a class="level is-mobile" href="#3-9-3-工厂bean"><span class="level-left"><span class="level-item">3.9.3</span><span class="level-item">3.9.3 工厂bean</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-10-IOC操作Bean管理-bean作用域"><span class="level-left"><span class="level-item">3.10</span><span class="level-item">3.10 IOC操作Bean管理(bean作用域)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-10-1-在Spring里面-设置创建bean实例是单实例还是多实例"><span class="level-left"><span class="level-item">3.10.1</span><span class="level-item">3.10.1 在Spring里面,设置创建bean实例是单实例还是多实例</span></span></a></li><li><a class="level is-mobile" href="#3-10-2-如何设置单实例还是多实例"><span class="level-left"><span class="level-item">3.10.2</span><span class="level-item">3.10.2 如何设置单实例还是多实例</span></span></a></li><li><a class="level is-mobile" href="#3-11-4-bean的后置处理器-bean生命周期有七步"><span class="level-left"><span class="level-item">3.10.3</span><span class="level-item">3.11.4 bean的后置处理器,bean生命周期有七步</span></span></a></li><li><a class="level is-mobile" href="#3-11-5-演示加后置处理器效果"><span class="level-left"><span class="level-item">3.10.4</span><span class="level-item">3.11.5 演示加后置处理器效果</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-12-IOC操作Bean管理-xml自动装配"><span class="level-left"><span class="level-item">3.11</span><span class="level-item">3.12 IOC操作Bean管理(xml自动装配)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-12-1-什么是自动装配"><span class="level-left"><span class="level-item">3.11.1</span><span class="level-item">3.12.1 什么是自动装配</span></span></a></li><li><a class="level is-mobile" href="#3-12-2-演示自动装配过程"><span class="level-left"><span class="level-item">3.11.2</span><span class="level-item">3.12.2 演示自动装配过程</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-13-IOC操作Bean管理-外部属性文件"><span class="level-left"><span class="level-item">3.12</span><span class="level-item">3.13 IOC操作Bean管理(外部属性文件)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-13-1-直接配置数据库信息"><span class="level-left"><span class="level-item">3.12.1</span><span class="level-item">3.13.1 直接配置数据库信息</span></span></a></li><li><a class="level is-mobile" href="#3-13-2-引入外部属性文件配置数据库连接池"><span class="level-left"><span class="level-item">3.12.2</span><span class="level-item">3.13.2 引入外部属性文件配置数据库连接池</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-14-IOC-操作Bean管理-基于注解方式"><span class="level-left"><span class="level-item">3.13</span><span class="level-item">3.14 IOC 操作Bean管理(基于注解方式)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-14-1-什么是注解"><span class="level-left"><span class="level-item">3.13.1</span><span class="level-item">3.14.1 什么是注解</span></span></a></li><li><a class="level is-mobile" href="#3-14-2-Spring针对Bean管理中创建对象提供注解"><span class="level-left"><span class="level-item">3.13.2</span><span class="level-item">3.14.2 Spring针对Bean管理中创建对象提供注解</span></span></a></li><li><a class="level is-mobile" href="#3-14-3-基于注解方式实现对象创建"><span class="level-left"><span class="level-item">3.13.3</span><span class="level-item">3.14.3 基于注解方式实现对象创建</span></span></a></li><li><a class="level is-mobile" href="#3-15-4-开启组件扫描细节配置"><span class="level-left"><span class="level-item">3.13.4</span><span class="level-item">3.15.4 开启组件扫描细节配置</span></span></a></li><li><a class="level is-mobile" href="#3-15-5-基于注解方式实现属性注入"><span class="level-left"><span class="level-item">3.13.5</span><span class="level-item">3.15.5 基于注解方式实现属性注入</span></span></a></li><li><a class="level is-mobile" href="#3-15-6-完全注解开发"><span class="level-left"><span class="level-item">3.13.6</span><span class="level-item">3.15.6 完全注解开发</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#4-AOP"><span class="level-left"><span class="level-item">4</span><span class="level-item">4. AOP</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1-什么是AOP"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">4.1 什么是AOP</span></span></a></li><li><a class="level is-mobile" href="#4-2-AOP-底层原理"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">4.2 AOP(底层原理)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-2-1-AOP底层使用动态代理"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">4.2.1 AOP底层使用动态代理</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-3-AOP-JDK动态代理"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">4.3 AOP(JDK动态代理)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-3-1-使用JDK动态代理-使用Proxy类里面的方法创建代理对象"><span class="level-left"><span class="level-item">4.3.1</span><span class="level-item">4.3.1 使用JDK动态代理,使用Proxy类里面的方法创建代理对象</span></span></a></li><li><a class="level is-mobile" href="#4-3-2-编写JDK动态代理代码"><span class="level-left"><span class="level-item">4.3.2</span><span class="level-item">4.3.2 编写JDK动态代理代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-4-AOP-术语"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">4.4 AOP(术语)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-4-1-连接点"><span class="level-left"><span class="level-item">4.4.1</span><span class="level-item">4.4.1 连接点</span></span></a></li><li><a class="level is-mobile" href="#4-4-2-切入点"><span class="level-left"><span class="level-item">4.4.2</span><span class="level-item">4.4.2 切入点</span></span></a></li><li><a class="level is-mobile" href="#4-4-3-通知-增强"><span class="level-left"><span class="level-item">4.4.3</span><span class="level-item">4.4.3 通知(增强)</span></span></a></li><li><a class="level is-mobile" href="#4-4-4-切面"><span class="level-left"><span class="level-item">4.4.4</span><span class="level-item">4.4.4 切面</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-5-AOP操作-准备"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">4.5 AOP操作(准备)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-5-1-Spring框架一般都是基于AspectJ实现AOP操作"><span class="level-left"><span class="level-item">4.5.1</span><span class="level-item">4.5.1 Spring框架一般都是基于AspectJ实现AOP操作</span></span></a></li><li><a class="level is-mobile" href="#4-5-2-基于AspectJ实现AOP操作"><span class="level-left"><span class="level-item">4.5.2</span><span class="level-item">4.5.2 基于AspectJ实现AOP操作</span></span></a></li><li><a class="level is-mobile" href="#4-5-3-在maven导入相关依赖"><span class="level-left"><span class="level-item">4.5.3</span><span class="level-item">4.5.3 在maven导入相关依赖</span></span></a></li><li><a class="level is-mobile" href="#4-5-4-切入点表达式"><span class="level-left"><span class="level-item">4.5.4</span><span class="level-item">4.5.4 切入点表达式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-6-AOP-AspectJ-注解"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">4.6 AOP(AspectJ 注解)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-6-1-创建类-在类里面定义方法"><span class="level-left"><span class="level-item">4.6.1</span><span class="level-item">4.6.1 创建类,在类里面定义方法</span></span></a></li><li><a class="level is-mobile" href="#4-6-2-创建增强类-编写增强逻辑）"><span class="level-left"><span class="level-item">4.6.2</span><span class="level-item">4.6.2 创建增强类(编写增强逻辑）</span></span></a></li><li><a class="level is-mobile" href="#4-6-3-进行通知的配置"><span class="level-left"><span class="level-item">4.6.3</span><span class="level-item">4.6.3 进行通知的配置</span></span></a></li><li><a class="level is-mobile" href="#4-6-4-配置不同类型的通知"><span class="level-left"><span class="level-item">4.6.4</span><span class="level-item">4.6.4 配置不同类型的通知</span></span></a></li><li><a class="level is-mobile" href="#4-6-5-相同的切入点抽取"><span class="level-left"><span class="level-item">4.6.5</span><span class="level-item">4.6.5 相同的切入点抽取</span></span></a></li><li><a class="level is-mobile" href="#4-6-6-有多个增强类多同一个方法进行增强-设置增强类优先级"><span class="level-left"><span class="level-item">4.6.6</span><span class="level-item">4.6.6 有多个增强类多同一个方法进行增强,设置增强类优先级</span></span></a></li><li><a class="level is-mobile" href="#4-6-7-完全使用注解开发"><span class="level-left"><span class="level-item">4.6.7</span><span class="level-item">4.6.7 完全使用注解开发</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-7-AOP操作-AspectJ配置文件"><span class="level-left"><span class="level-item">4.7</span><span class="level-item">4.7 AOP操作(AspectJ配置文件)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-7-1-创建两个类-增强类和被增强类-创建方法"><span class="level-left"><span class="level-item">4.7.1</span><span class="level-item">4.7.1 创建两个类,增强类和被增强类,创建方法</span></span></a></li><li><a class="level is-mobile" href="#4-7-2-在spring配置文件中创建两个类对象"><span class="level-left"><span class="level-item">4.7.2</span><span class="level-item">4.7.2 在spring配置文件中创建两个类对象</span></span></a></li><li><a class="level is-mobile" href="#4-7-3-在spring配置文件中配置切入点"><span class="level-left"><span class="level-item">4.7.3</span><span class="level-item">4.7.3 在spring配置文件中配置切入点</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#5-JdbcTemplate"><span class="level-left"><span class="level-item">5</span><span class="level-item">5. JdbcTemplate</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-1-什么是JdbcTemplate"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">5.1 什么是JdbcTemplate</span></span></a></li><li><a class="level is-mobile" href="#5-2-准备工作"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">5.2 准备工作</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-2-1-在maven中导入相关依赖"><span class="level-left"><span class="level-item">5.2.1</span><span class="level-item">5.2.1 在maven中导入相关依赖</span></span></a></li><li><a class="level is-mobile" href="#5-2-2-在spring配置文件配置数据库连接池"><span class="level-left"><span class="level-item">5.2.2</span><span class="level-item">5.2.2 在spring配置文件配置数据库连接池</span></span></a></li><li><a class="level is-mobile" href="#5-2-3-配置JdbcTemplate对象-注入DataSource"><span class="level-left"><span class="level-item">5.2.3</span><span class="level-item">5.2.3 配置JdbcTemplate对象,注入DataSource</span></span></a></li><li><a class="level is-mobile" href="#5-2-4-创建service类-创建dao类-在dao注入jdbcTemplate对象"><span class="level-left"><span class="level-item">5.2.4</span><span class="level-item">5.2.4 创建service类,创建dao类,在dao注入jdbcTemplate对象</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-3-JdbcTemplate操作数据库-添加"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">5.3 JdbcTemplate操作数据库(添加)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-3-1-对应数据库创建实体类"><span class="level-left"><span class="level-item">5.3.1</span><span class="level-item">5.3.1 对应数据库创建实体类</span></span></a></li><li><a class="level is-mobile" href="#5-3-2-编写-service-和-dao"><span class="level-left"><span class="level-item">5.3.2</span><span class="level-item">5.3.2 编写 service 和 dao</span></span></a></li><li><a class="level is-mobile" href="#5-3-3-测试类"><span class="level-left"><span class="level-item">5.3.3</span><span class="level-item">5.3.3 测试类</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-4-JdbcTemplate操作数据库-修改和删除"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">5.4 JdbcTemplate操作数据库(修改和删除)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-4-1-修改"><span class="level-left"><span class="level-item">5.4.1</span><span class="level-item">5.4.1 修改</span></span></a></li><li><a class="level is-mobile" href="#5-4-2-删除"><span class="level-left"><span class="level-item">5.4.2</span><span class="level-item">5.4.2 删除</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-5-JdbcTemplate操作数据库-查询返回某个值"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">5.5 JdbcTemplate操作数据库(查询返回某个值)</span></span></a></li><li><a class="level is-mobile" href="#5-6-JdbcTemplate操作数据库-查询返回对象"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">5.6 JdbcTemplate操作数据库(查询返回对象)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-6-1-使用场景"><span class="level-left"><span class="level-item">5.6.1</span><span class="level-item">5.6.1 使用场景</span></span></a></li><li><a class="level is-mobile" href="#5-6-2-调用JdbcTemplate方法实现查询返回集合"><span class="level-left"><span class="level-item">5.6.2</span><span class="level-item">5.6.2 调用JdbcTemplate方法实现查询返回集合</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-7-JdbcTemplate-操作数据库-批量操作"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">5.7 JdbcTemplate 操作数据库(批量操作)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-7-1-使用场景"><span class="level-left"><span class="level-item">5.7.1</span><span class="level-item">5.7.1 使用场景</span></span></a></li><li><a class="level is-mobile" href="#5-7-2-调用-JdbcTemplate-方法实现查询返回集合"><span class="level-left"><span class="level-item">5.7.2</span><span class="level-item">5.7.2 调用 JdbcTemplate 方法实现查询返回集合</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-8-JdbcTemplate操作数据库-批量操作"><span class="level-left"><span class="level-item">5.8</span><span class="level-item">5.8 JdbcTemplate操作数据库(批量操作)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-8-1-批量操作"><span class="level-left"><span class="level-item">5.8.1</span><span class="level-item">5.8.1 批量操作</span></span></a></li><li><a class="level is-mobile" href="#5-8-2-JdbcTemplate实现批量添加操作"><span class="level-left"><span class="level-item">5.8.2</span><span class="level-item">5.8.2 JdbcTemplate实现批量添加操作</span></span></a></li><li><a class="level is-mobile" href="#5-8-3-JdbcTemplate实现批量修改操作"><span class="level-left"><span class="level-item">5.8.3</span><span class="level-item">5.8.3 JdbcTemplate实现批量修改操作</span></span></a></li><li><a class="level is-mobile" href="#5-8-4-JdbcTemplate实现批量删除操作"><span class="level-left"><span class="level-item">5.8.4</span><span class="level-item">5.8.4 JdbcTemplate实现批量删除操作</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#6-事务"><span class="level-left"><span class="level-item">6</span><span class="level-item">6. 事务</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1-什么事务"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">6.1 什么事务</span></span></a></li><li><a class="level is-mobile" href="#6-2-事务四个特性-ACID"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">6.2 事务四个特性(ACID)</span></span></a></li><li><a class="level is-mobile" href="#6-3-事务操作-搭建事务操作环境"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">6.3 事务操作(搭建事务操作环境)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-3-1-创建数据库-添加记录"><span class="level-left"><span class="level-item">6.3.1</span><span class="level-item">6.3.1 创建数据库,添加记录</span></span></a></li><li><a class="level is-mobile" href="#6-3-2-创建service-搭建dao-完成对象创建和注入关系"><span class="level-left"><span class="level-item">6.3.2</span><span class="level-item">6.3.2 创建service,搭建dao,完成对象创建和注入关系</span></span></a></li><li><a class="level is-mobile" href="#6-3-3-在dao创建两个方法-多钱和少钱的方法-在service创建方法-转账的方法"><span class="level-left"><span class="level-item">6.3.3</span><span class="level-item">6.3.3 在dao创建两个方法:多钱和少钱的方法,在service创建方法(转账的方法)</span></span></a></li><li><a class="level is-mobile" href="#6-3-4-上面代码在执行过程中出现异常-会有问题"><span class="level-left"><span class="level-item">6.3.4</span><span class="level-item">6.3.4 上面代码在执行过程中出现异常,会有问题</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-4-事务操作-Spring事务管理介绍"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">6.4 事务操作(Spring事务管理介绍)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-4-1-事务添加的位置"><span class="level-left"><span class="level-item">6.4.1</span><span class="level-item">6.4.1 事务添加的位置</span></span></a></li><li><a class="level is-mobile" href="#6-4-2-在Spring进行事务管理操作"><span class="level-left"><span class="level-item">6.4.2</span><span class="level-item">6.4.2 在Spring进行事务管理操作</span></span></a></li><li><a class="level is-mobile" href="#6-4-3-声明式事务管理"><span class="level-left"><span class="level-item">6.4.3</span><span class="level-item">6.4.3 声明式事务管理</span></span></a></li><li><a class="level is-mobile" href="#6-4-4-在Spring进行声明式事务管理-底层使用AOP原理"><span class="level-left"><span class="level-item">6.4.4</span><span class="level-item">6.4.4 在Spring进行声明式事务管理,底层使用AOP原理</span></span></a></li><li><a class="level is-mobile" href="#6-4-5-Spring事务管理API"><span class="level-left"><span class="level-item">6.4.5</span><span class="level-item">6.4.5 Spring事务管理API</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-5-事务操作-注解声明式事务管理"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">6.5 事务操作(注解声明式事务管理)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-5-1-在spring配置文件配置事务管理器"><span class="level-left"><span class="level-item">6.5.1</span><span class="level-item">6.5.1 在spring配置文件配置事务管理器</span></span></a></li><li><a class="level is-mobile" href="#6-5-2-在spring配置文件-开启事务注解"><span class="level-left"><span class="level-item">6.5.2</span><span class="level-item">6.5.2 在spring配置文件,开启事务注解</span></span></a></li><li><a class="level is-mobile" href="#6-5-3-在service类上面-或者service类里面方法上面-添加事务注解"><span class="level-left"><span class="level-item">6.5.3</span><span class="level-item">6.5.3 在service类上面(或者service类里面方法上面)添加事务注解</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-6-事务操作-声明式事务管理参数配置"><span class="level-left"><span class="level-item">6.6</span><span class="level-item">6.6 事务操作(声明式事务管理参数配置)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-6-1-在service类上面添加注解-Transactional-在这个注解里面可以配置事务相关参数"><span class="level-left"><span class="level-item">6.6.1</span><span class="level-item">6.6.1 在service类上面添加注解@Transactional,在这个注解里面可以配置事务相关参数</span></span></a></li><li><a class="level is-mobile" href="#6-6-2-propagation-事务传播行为"><span class="level-left"><span class="level-item">6.6.2</span><span class="level-item">6.6.2 propagation:事务传播行为</span></span></a></li><li><a class="level is-mobile" href="#6-6-3-ioslation-事务隔离级别"><span class="level-left"><span class="level-item">6.6.3</span><span class="level-item">6.6.3 ioslation:事务隔离级别</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-8-事务操作-完全注解声明式事务管理"><span class="level-left"><span class="level-item">6.7</span><span class="level-item">6.8 事务操作(完全注解声明式事务管理)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-8-1-创建配置类-使用配置类替代xml配置文件"><span class="level-left"><span class="level-item">6.7.1</span><span class="level-item">6.8.1 创建配置类,使用配置类替代xml配置文件</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#7-Spring5框架新功能"><span class="level-left"><span class="level-item">7</span><span class="level-item">7. Spring5框架新功能</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1-Spring5-0框架自带了通用的日志封装"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">7.1 Spring5.0框架自带了通用的日志封装</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1-1-在maven引入相关的包"><span class="level-left"><span class="level-item">7.1.1</span><span class="level-item">7.1.1 在maven引入相关的包</span></span></a></li><li><a class="level is-mobile" href="#7-1-2-创建创建log4j2-xml配置文件"><span class="level-left"><span class="level-item">7.1.2</span><span class="level-item">7.1.2 创建创建log4j2.xml配置文件</span></span></a></li><li><a class="level is-mobile" href="#7-1-3-Spring5框架核心容器支持-Nullable注解"><span class="level-left"><span class="level-item">7.1.3</span><span class="level-item">7.1.3 Spring5框架核心容器支持@Nullable注解</span></span></a></li><li><a class="level is-mobile" href="#7-1-4-Spring5核心容器支持函数式风格GenericApplicationContext"><span class="level-left"><span class="level-item">7.1.4</span><span class="level-item">7.1.4 Spring5核心容器支持函数式风格GenericApplicationContext</span></span></a></li><li><a class="level is-mobile" href="#7-1-5-Spring5支持整合JUnit5"><span class="level-left"><span class="level-item">7.1.5</span><span class="level-item">7.1.5 Spring5支持整合JUnit5</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">カテゴリ</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/YouTube%E5%AD%A6%E7%BF%92/"><span class="level-start"><span class="level-item">YouTube学習</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/YouTube%E5%AD%A6%E7%BF%92/%E6%9C%AC%E3%81%AE%E8%A6%81%E7%B4%84/"><span class="level-start"><span class="level-item">本の要約</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/YouTube%E5%AD%A6%E7%BF%92/%E9%9D%A2%E6%8E%A5%E7%9F%A5%E8%AD%98/"><span class="level-start"><span class="level-item">面接知識</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC/"><span class="level-start"><span class="level-item">テクノロジー</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC/%E8%A8%AD%E8%A8%88/"><span class="level-start"><span class="level-item">設計</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/"><span class="level-start"><span class="level-item">プログラミング</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/DB/"><span class="level-start"><span class="level-item">DB</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/Infra/"><span class="level-start"><span class="level-item">Infra</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/%E3%83%84%E3%83%BC%E3%83%AB/"><span class="level-start"><span class="level-item">ツール</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%BD%9C%E6%A5%AD/"><span class="level-start"><span class="level-item">作業</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E4%BD%9C%E6%A5%AD/%E4%BB%95%E4%BA%8B%E3%83%8E%E3%83%BC%E3%83%88/"><span class="level-start"><span class="level-item">仕事ノート</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BD%9C%E6%A5%AD/%E4%BD%9C%E6%A5%AD%E3%83%A1%E3%83%A2/"><span class="level-start"><span class="level-item">作業メモ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E6%8E%A5/"><span class="level-start"><span class="level-item">面接</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最近の記事</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-18T12:12:34.000Z">2024-04-18</time></p><p class="title"><a href="/How-does-Spring-address-circular-dependencies">Springはどのように循環依存性に対処するのか？</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-18T10:43:51.000Z">2024-04-18</time></p><p class="title"><a href="/MyBatis">MyBatis</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-15T11:42:17.000Z">2024-04-15</time></p><p class="title"><a href="/Ho-do-the-frontend-and-backend-communicate">フロントエンドとバックエンドはどのように通信するのでしょうか</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-11T10:55:43.000Z">2024-04-11</time></p><p class="title"><a href="/MVCh%E5%92%8CMVVM%E7%9A%84%E5%8C%BA%E5%88%AB">MVCとMVVMの違い</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-08T11:49:04.000Z">2024-04-08</time></p><p class="title"><a href="/What-technology-has-replaced-JSP">JSP に取って代わられたテクノロジーは何ですか</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">アーカイブ</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">タグ</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/API/"><span class="tag">API</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AWS/"><span class="tag">AWS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Backend/"><span class="tag">Backend</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CI-CD/"><span class="tag">CI-CD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CN/"><span class="tag">CN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Excel/"><span class="tag">Excel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Infra/"><span class="tag">Infra</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JP/"><span class="tag">JP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MVC/"><span class="tag">MVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MVVM/"><span class="tag">MVVM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mockito/"><span class="tag">Mockito</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MyBatis/"><span class="tag">MyBatis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Optimization/"><span class="tag">Optimization</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/S3/"><span class="tag">S3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringMVC/"><span class="tag">SpringMVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TODO/"><span class="tag">TODO</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Test/"><span class="tag">Test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tool/"><span class="tag">Tool</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue/"><span class="tag">Vue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WBS/"><span class="tag">WBS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/YouTube/"><span class="tag">YouTube</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jp-memo/"><span class="tag">jp-memo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reading/"><span class="tag">reading</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%82%A6%E3%82%A9%E3%83%BC%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A9%E3%83%BC%E3%83%AB/"><span class="tag">ウォーターフォール</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E7%9F%A5%E8%AD%98/"><span class="tag">エンジニア知識</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%82%AF%E3%82%A4%E3%83%83%E3%82%AF%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF/"><span class="tag">クイックチェック</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%83%86%E3%82%B9%E3%83%88/"><span class="tag">テスト</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9/"><span class="tag">リリース</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC/"><span class="tag">レビュー</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%9C%E6%A5%AD%E3%83%A1%E3%83%A2/"><span class="tag">作業メモ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%98%E8%AA%9E/"><span class="tag">単語</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%A5%E8%AA%AD%E7%82%B9/"><span class="tag">句読点</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%96%E5%9B%BD%E4%BA%BA/"><span class="tag">外国人</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E6%9C%AC%E4%BB%95%E4%BA%8B/"><span class="tag">日本仕事</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%83%A1%E3%83%A2/"><span class="tag">日本語メモ</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%9F%E6%B4%BB/"><span class="tag">生活</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%A8%AD%E8%A8%88/"><span class="tag">設計</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%96%8B%E7%99%BA%E3%83%A1%E3%83%A2/"><span class="tag">開発メモ</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E6%8E%A5/"><span class="tag">面接</span><span class="tag">5</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/orange.png" alt="OrangeNoteBlog" height="28"></a><p class="is-size-7"><span>&copy; 2024 orange</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2018</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><i class="fab fa-creative-commons"></i> <i class="fab fa-creative-commons-by"></i> <i class="fab fa-creative-commons-nc"></i> <i class="fab fa-creative-commons-sa"></i> </a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("jp");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="トップに戻る" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "このウェブサイトはあなたの経験を改善するためにCookieを使用しています。",
          dismiss: "了解しました",
          allow: "Cookiesを許可する",
          deny: "拒否する",
          link: "もっと詳しく知る",
          policy: "Cookieポリシー",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="何かを入力してください..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"何かを入力してください...","untitled":"(無題)","posts":"投稿","pages":"ページ","categories":"カテゴリ","tags":"タグ"});
        });</script></body></html>